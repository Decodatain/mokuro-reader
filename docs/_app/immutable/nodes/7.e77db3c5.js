import{s as je,y as Ye,M as Je,N as Qe,h as G,d as R,j as ne,O as We,i as ce,A as S,B as ge,L as Ne,F as vt,G as et,H as tt,I as we,e as Se,R as Le,f as j,l as ae,a as de,g as X,m as re,c as me,V as Ce,n as be,U as kt,Q as Rt}from"../chunks/scheduler.729d8167.js";import{S as Xe,i as Ke,a as Z,g as ze,t as K,c as Be,b as Ae,d as De,m as Te,e as ye}from"../chunks/index.fba99ec1.js";import{F as Nt,L as Lt,a as Ot,e as at,u as Ct,o as xt}from"../chunks/Listgroup.c59467cf.js";import{a as Mt,d as ht,c as Ut,b as Pt,B as rt}from"../chunks/misc.b6c4c71b.js";import{g as xe}from"../chunks/navigation.f65766f8.js";import{p as At}from"../chunks/stores.eba2874c.js";import{g as zt,D as Ze,G as st,e as q,U as Fe,M as W,S as Bt,a as Vt,v as $t,x as Zt,l as it,h as Gt,Z as Ht,V as Yt,u as jt,w as Dt,k as Xt,H as nt,I as lt,j as Kt,J as ot,K as ct,L as qt,N as Jt,r as Qt,C as Wt,F as ea,E as ft,i as ta,f as aa,b as ra,O as sa,q as ia,o as na,y as la,P as oa,p as Tt}from"../chunks/index.82e508c7.js";import{t as ut,g as ca,d as Me}from"../chunks/db.60763777.js";import{T as fa}from"../chunks/TrashBinSolid.2dd60819.js";import{b as ua,S as da,i as ma,a as Ue,E as yt,s as St,c as _a,l as pa,m as Ea,n as ga,t as wa,u as ha,v as Aa,w as Da,B as Ta,T as ya}from"../chunks/zip-entry.18716e8a.js";function Sa(a){let e,r,t,s,n,o=[{xmlns:"http://www.w3.org/2000/svg"},{fill:"currentColor"},a[4],{class:t=ut("shrink-0",a[3][a[0]],a[5].class)},{role:a[1]},{"aria-label":a[2]},{viewBox:"0 0 20 20"}],l={};for(let i=0;i<o.length;i+=1)l=Ye(l,o[i]);return{c(){e=Je("svg"),r=Je("path"),this.h()},l(i){e=Qe(i,"svg",{xmlns:!0,fill:!0,class:!0,role:!0,"aria-label":!0,viewBox:!0});var u=G(e);r=Qe(u,"path",{fill:!0,d:!0}),G(r).forEach(R),u.forEach(R),this.h()},h(){ne(r,"fill","currentColor"),ne(r,"d","M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5Zm3.707 8.207-4 4a1 1 0 0 1-1.414 0l-2-2a1 1 0 0 1 1.414-1.414L9 10.586l3.293-3.293a1 1 0 0 1 1.414 1.414Z"),We(e,l)},m(i,u){ce(i,e,u),S(e,r),s||(n=[ge(e,"click",a[6]),ge(e,"keydown",a[7]),ge(e,"keyup",a[8]),ge(e,"focus",a[9]),ge(e,"blur",a[10]),ge(e,"mouseenter",a[11]),ge(e,"mouseleave",a[12]),ge(e,"mouseover",a[13]),ge(e,"mouseout",a[14])],s=!0)},p(i,[u]){We(e,l=ca(o,[{xmlns:"http://www.w3.org/2000/svg"},{fill:"currentColor"},u&16&&i[4],u&33&&t!==(t=ut("shrink-0",i[3][i[0]],i[5].class))&&{class:t},u&2&&{role:i[1]},u&4&&{"aria-label":i[2]},{viewBox:"0 0 20 20"}]))},i:Ne,o:Ne,d(i){i&&R(e),s=!1,vt(n)}}}function Ia(a,e,r){const t=["size","role","ariaLabel"];let s=et(e,t),{size:n="md"}=e,{role:o="img"}=e;const l={xs:"w-3 h-3",sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6",xl:"w-8 h-8"};let{ariaLabel:i="check circle solid"}=e;function u(d){we.call(this,a,d)}function p(d){we.call(this,a,d)}function f(d){we.call(this,a,d)}function c(d){we.call(this,a,d)}function m(d){we.call(this,a,d)}function E(d){we.call(this,a,d)}function h(d){we.call(this,a,d)}function g(d){we.call(this,a,d)}function w(d){we.call(this,a,d)}return a.$$set=d=>{r(5,e=Ye(Ye({},e),tt(d))),r(4,s=et(e,t)),"size"in d&&r(0,n=d.size),"role"in d&&r(1,o=d.role),"ariaLabel"in d&&r(2,i=d.ariaLabel)},e=tt(e),[n,o,i,l,s,e,u,p,f,c,m,E,h,g,w]}class ba extends Xe{constructor(e){super(),Ke(this,e,Ia,Sa,je,{size:0,role:1,ariaLabel:2})}}const Fa="File already exists",va="Zip file comment exceeds 64KB",ka="File entry comment exceeds 64KB",Ra="File entry name exceeds 64KB",dt="Version exceeds 65535",Na="The strength must equal 1, 2, or 3",La="Extra field type exceeds 65535",Oa="Extra field data exceeds 64KB",qe="Zip64 is not supported (make sure 'keepOrder' is set to 'true')",mt=new Uint8Array([7,0,2,0,65,69,3,0,0]);let Ge=0;const _t=[];class Ca{constructor(e,r={}){e=ua(e),Object.assign(this,{writer:e,addSplitZipSignature:e instanceof da,options:r,config:zt(),files:new Map,filenames:new Set,offset:e.writable.size,pendingEntriesSize:0,pendingAddFileCalls:new Set,bufferedWrites:0})}async add(e="",r,t={}){const s=this,{pendingAddFileCalls:n,config:o}=s;Ge<o.maxWorkers?Ge++:await new Promise(i=>_t.push(i));let l;try{if(e=e.trim(),s.filenames.has(e))throw new Error(Fa);return s.filenames.add(e),l=xa(s,e,r,t),n.add(l),await l}catch(i){throw s.filenames.delete(e),i}finally{n.delete(l);const i=_t.shift();i?i():Ge--}}async close(e=new Uint8Array,r={}){const t=this,{pendingAddFileCalls:s,writer:n}=this,{writable:o}=n;for(;s.size;)await Promise.all(Array.from(s));return await Za(this,e,r),O(t,r,"preventClose")||await o.getWriter().close(),n.getData?n.getData():o}}async function xa(a,e,r,t){e=e.trim(),t.directory&&!e.endsWith(Ze)?e+=Ze:t.directory=e.endsWith(Ze);const s=st(e);if(b(s)>q)throw new Error(Ra);const n=t.comment||"",o=st(n);if(b(o)>q)throw new Error(ka);const l=O(a,t,"version",Yt);if(l>q)throw new Error(dt);const i=O(a,t,"versionMadeBy",20);if(i>q)throw new Error(dt);const u=O(a,t,pa,new Date),p=O(a,t,Ea),f=O(a,t,ga),c=O(a,t,wa,!0),m=O(a,t,ha,0),E=O(a,t,Aa,0),h=O(a,t,"password"),g=O(a,t,"encryptionStrength",3),w=O(a,t,"zipCrypto"),d=O(a,t,"extendedTimestamp",!0),_=O(a,t,"keepOrder",!0),M=O(a,t,"level"),B=O(a,t,"useWebWorkers"),T=O(a,t,"bufferedWrite"),v=O(a,t,"dataDescriptorSignature",!1),N=O(a,t,"signal"),P=O(a,t,"useCompressionStream");let A=O(a,t,"dataDescriptor",!0),I=O(a,t,Da);if(h!==Fe&&g!==Fe&&(g<1||g>3))throw new Error(Na);let C=new Uint8Array;const{extraField:x}=t;if(x){let ve=0,Y=0;x.forEach(ie=>ve+=4+b(ie)),C=new Uint8Array(ve),x.forEach((ie,he)=>{if(he>q)throw new Error(La);if(b(ie)>q)throw new Error(Oa);$(C,new Uint16Array([he]),Y),$(C,new Uint16Array([b(ie)]),Y+2),$(C,ie,Y+4),Y+=4+b(ie)})}let z=0,U=0,V=0;const k=I===!0;r&&(r=ma(r),await Ue(r),r.size===Fe?(A=!0,(I||I===Fe)&&(I=!0,V=z=W)):(V=r.size,z=Ga(V)));const{diskOffset:y,diskNumber:L,maxSize:ee}=a.writer,H=k||V>=W,se=k||z>=W,te=k||a.offset+a.pendingEntriesSize-y>=W,fe=O(a,t,"supportZip64SplitFile",!0)&&k||L+Math.ceil(a.pendingEntriesSize/ee)>=q;if(te||H||se||fe){if(I===!1||!_)throw new Error(qe);I=!0}I=I||!1,t=Object.assign({},t,{rawFilename:s,rawComment:o,version:l,versionMadeBy:i,lastModDate:u,lastAccessDate:p,creationDate:f,rawExtraField:C,zip64:I,zip64UncompressedSize:H,zip64CompressedSize:se,zip64Offset:te,zip64DiskNumberStart:fe,password:h,level:M,useWebWorkers:B,encryptionStrength:g,extendedTimestamp:d,zipCrypto:w,bufferedWrite:T,keepOrder:_,dataDescriptor:A,dataDescriptorSignature:v,signal:N,msDosCompatible:c,internalFileAttribute:m,externalFileAttribute:E,useCompressionStream:P});const ue=Pa(t),oe=za(t);U=b(ue.localHeaderArray,oe.dataDescriptorArray)+z,a.pendingEntriesSize+=U;let Ie;try{Ie=await Ma(a,e,r,{headerInfo:ue,dataDescriptorInfo:oe},t)}finally{a.pendingEntriesSize-=U}return Object.assign(Ie,{name:e,comment:n,extraField:x}),new yt(Ie)}async function Ma(a,e,r,t,s){const{files:n,writer:o}=a,{keepOrder:l,dataDescriptor:i,signal:u}=s,{headerInfo:p}=t,f=Array.from(n.values()).pop();let c={},m,E,h,g,w,d;n.set(e,c);try{let T;l&&(T=f&&f.lock,_()),s.bufferedWrite||a.writerLocked||a.bufferedWrites&&l||!i?(d=new St,d.writable.size=0,m=!0,a.bufferedWrites++,await Ue(o)):(d=o,await M()),await Ue(d);const{writable:v}=o;let{diskOffset:N}=o;if(a.addSplitZipSignature){delete a.addSplitZipSignature;const A=new Uint8Array(4),I=Q(A);D(I,0,Bt),await _e(v,A),a.offset+=4}m||(await T,await B(v));const{diskNumber:P}=o;if(w=!0,c.diskNumberStart=P,c=await Ua(r,d,c,t,a.config,s),w=!1,n.set(e,c),c.filename=e,m){await d.writable.getWriter().close();let A=await d.getData();await T,await M(),g=!0,i||(A=await Va(c,A,v,s)),await B(v),c.diskNumberStart=o.diskNumber,N=o.diskOffset,await A.stream().pipeTo(v,{preventClose:!0,preventAbort:!0,signal:u}),v.size+=A.size,g=!1}if(c.offset=a.offset-N,c.zip64)$a(c,s);else if(c.offset>=W)throw new Error(qe);return a.offset+=c.length,c}catch(T){if(m&&g||!m&&w){if(a.hasCorruptedEntries=!0,T)try{T.corruptedEntry=!0}catch{}m?a.offset+=d.writable.size:a.offset=d.writable.size}throw n.delete(e),T}finally{m&&a.bufferedWrites--,h&&h(),E&&E()}function _(){c.lock=new Promise(T=>h=T)}async function M(){a.writerLocked=!0;const{lockWriter:T}=a;a.lockWriter=new Promise(v=>E=()=>{a.writerLocked=!1,v()}),await T}async function B(T){p.localHeaderArray.length>o.availableSize&&(o.availableSize=0,await _e(T,new Uint8Array))}}async function Ua(a,e,{diskNumberStart:r,lock:t},s,n,o){const{headerInfo:l,dataDescriptorInfo:i}=s,{localHeaderArray:u,headerArray:p,lastModDate:f,rawLastModDate:c,encrypted:m,compressed:E,version:h,compressionMethod:g,rawExtraFieldExtendedTimestamp:w,rawExtraFieldNTFS:d,rawExtraFieldAES:_}=l,{dataDescriptorArray:M}=i,{rawFilename:B,lastAccessDate:T,creationDate:v,password:N,level:P,zip64:A,zip64UncompressedSize:I,zip64CompressedSize:C,zip64Offset:x,zip64DiskNumberStart:z,zipCrypto:U,dataDescriptor:V,directory:k,versionMadeBy:y,rawComment:L,rawExtraField:ee,useWebWorkers:H,onstart:se,onprogress:te,onend:le,signal:fe,encryptionStrength:ue,extendedTimestamp:oe,msDosCompatible:Ie,internalFileAttribute:ve,externalFileAttribute:Y,useCompressionStream:ie}=o,he={lock:t,versionMadeBy:y,zip64:A,directory:!!k,filenameUTF8:!0,rawFilename:B,commentUTF8:!0,rawComment:L,rawExtraFieldExtendedTimestamp:w,rawExtraFieldNTFS:d,rawExtraFieldAES:_,rawExtraField:ee,extendedTimestamp:oe,msDosCompatible:Ie,internalFileAttribute:ve,externalFileAttribute:Y,diskNumberStart:r};let ke=0,pe=0,Ve;const{writable:Re}=e,It=b(u,M);if(a){a.chunkSize=Vt(n),await _e(Re,u);const Ee=a.readable,bt=Ee.size=a.size,Ft={options:{codecType:sa,level:P,password:N,encryptionStrength:ue,zipCrypto:m&&U,passwordVerification:m&&U&&c>>8&255,signed:!0,compressed:E,encrypted:m,useWebWorkers:H,useCompressionStream:ie,transferStreams:!1},config:n,streamOptions:{signal:fe,size:bt,onstart:se,onprogress:te,onend:le}},$e=await _a({readable:Ee,writable:Re},Ft);Re.size+=$e.size,Ve=$e.signature,pe=a.size=Ee.size,ke=$e.size}else await _e(Re,u);let Oe;if(A){let Ee=4;I&&(Ee+=8),C&&(Ee+=8),x&&(Ee+=8),z&&(Ee+=4),Oe=new Uint8Array(Ee)}else Oe=new Uint8Array;return Ba({signature:Ve,rawExtraFieldZip64:Oe,compressedSize:ke,uncompressedSize:pe,headerInfo:l,dataDescriptorInfo:i},o),V&&await _e(Re,M),Object.assign(he,{uncompressedSize:pe,compressedSize:ke,lastModDate:f,rawLastModDate:c,creationDate:v,lastAccessDate:T,encrypted:m,length:It+ke,compressionMethod:g,version:h,headerArray:p,signature:Ve,rawExtraFieldZip64:Oe,zip64UncompressedSize:I,zip64CompressedSize:C,zip64Offset:x,zip64DiskNumberStart:z}),he}function Pa(a){const{rawFilename:e,lastModDate:r,lastAccessDate:t,creationDate:s,password:n,level:o,zip64:l,zipCrypto:i,dataDescriptor:u,directory:p,rawExtraField:f,encryptionStrength:c,extendedTimestamp:m}=a,E=o!==0&&!p,h=!!(n&&b(n));let g=a.version,w;if(h&&!i){w=new Uint8Array(b(mt)+2);const U=Q(w);F(U,0,jt),$(w,mt,2),Pe(U,8,c)}else w=new Uint8Array;let d,_;if(m){_=new Uint8Array(9+(t?4:0)+(s?4:0));const U=Q(_);F(U,0,Dt),F(U,2,b(_)-4);const V=1+(t?2:0)+(s?4:0);Pe(U,4,V),D(U,5,Math.floor(r.getTime()/1e3)),t&&D(U,9,Math.floor(t.getTime()/1e3)),s&&D(U,13,Math.floor(s.getTime()/1e3));try{d=new Uint8Array(36);const k=Q(d),y=He(r);F(k,0,$t),F(k,2,32),F(k,8,Zt),F(k,10,24),J(k,12,y),J(k,20,He(t)||y),J(k,28,He(s)||y)}catch{d=new Uint8Array}}else d=_=new Uint8Array;let M=ia;u&&(M=M|na);let B=Xt;E&&(B=it),l&&(g=g>nt?g:nt),h&&(M=M|la,i||(g=g>lt?g:lt,B=Kt,E&&(w[9]=it)));const T=new Uint8Array(26),v=Q(T);F(v,0,g),F(v,2,M),F(v,4,B);const N=new Uint32Array(1),P=Q(N);let A;r<ot?A=ot:r>ct?A=ct:A=r,F(P,0,(A.getHours()<<6|A.getMinutes())<<5|A.getSeconds()/2),F(P,2,(A.getFullYear()-1980<<4|A.getMonth()+1)<<5|A.getDate());const I=N[0];D(v,6,I),F(v,22,b(e));const C=b(w,_,d,f);F(v,24,C);const x=new Uint8Array(30+b(e)+C),z=Q(x);return D(z,0,qt),$(x,T,4),$(x,e,30),$(x,w,30+b(e)),$(x,_,30+b(e,w)),$(x,d,30+b(e,w,_)),$(x,f,30+b(e,w,_,d)),{localHeaderArray:x,headerArray:T,headerView:v,lastModDate:r,rawLastModDate:I,encrypted:h,compressed:E,version:g,compressionMethod:B,rawExtraFieldExtendedTimestamp:_,rawExtraFieldNTFS:d,rawExtraFieldAES:w}}function za(a){const{zip64:e,dataDescriptor:r,dataDescriptorSignature:t}=a;let s=new Uint8Array,n,o=0;return r&&(s=new Uint8Array(e?t?24:20:t?16:12),n=Q(s),t&&(o=4,D(n,0,Jt))),{dataDescriptorArray:s,dataDescriptorView:n,dataDescriptorOffset:o}}function Ba(a,e){const{signature:r,rawExtraFieldZip64:t,compressedSize:s,uncompressedSize:n,headerInfo:o,dataDescriptorInfo:l}=a,{headerView:i,encrypted:u}=o,{dataDescriptorView:p,dataDescriptorOffset:f}=l,{zip64:c,zip64UncompressedSize:m,zip64CompressedSize:E,zipCrypto:h,dataDescriptor:g}=e;if((!u||h)&&r!==Fe&&(D(i,10,r),g&&D(p,f,r)),c){const w=Q(t);F(w,0,Qt),F(w,2,t.length-4);let d=4;m&&(D(i,18,W),J(w,d,BigInt(n)),d+=8),E&&(D(i,14,W),J(w,d,BigInt(s))),g&&(J(p,f+4,BigInt(s)),J(p,f+12,BigInt(n)))}else D(i,14,s),D(i,18,n),g&&(D(p,f+4,s),D(p,f+8,n))}async function Va(a,e,r,{zipCrypto:t}){let s;s=await e.slice(0,26).arrayBuffer(),s.byteLength!=26&&(s=s.slice(0,26));const n=new DataView(s);return(!a.encrypted||t)&&D(n,14,a.signature),a.zip64?(D(n,18,W),D(n,22,W)):(D(n,18,a.compressedSize),D(n,22,a.uncompressedSize)),await _e(r,new Uint8Array(s)),e.slice(s.byteLength)}function $a(a,e){const{rawExtraFieldZip64:r,offset:t,diskNumberStart:s}=a,{zip64UncompressedSize:n,zip64CompressedSize:o,zip64Offset:l,zip64DiskNumberStart:i}=e,u=Q(r);let p=4;n&&(p+=8),o&&(p+=8),l&&(J(u,p,BigInt(t)),p+=8),i&&D(u,p,s)}async function Za(a,e,r){const{files:t,writer:s}=a,{diskOffset:n,writable:o}=s;let{diskNumber:l}=s,i=0,u=0,p=a.offset-n,f=t.size;for(const[,{rawFilename:B,rawExtraFieldZip64:T,rawExtraFieldAES:v,rawExtraField:N,rawComment:P,rawExtraFieldExtendedTimestamp:A,rawExtraFieldNTFS:I}]of t)u+=46+b(B,P,T,v,A,I,N);const c=new Uint8Array(u),m=Q(c);await Ue(s);let E=0;for(const[B,T]of Array.from(t.values()).entries()){const{offset:v,rawFilename:N,rawExtraFieldZip64:P,rawExtraFieldAES:A,rawExtraFieldNTFS:I,rawExtraField:C,rawComment:x,versionMadeBy:z,headerArray:U,directory:V,zip64:k,zip64UncompressedSize:y,zip64CompressedSize:L,zip64DiskNumberStart:ee,zip64Offset:H,msDosCompatible:se,internalFileAttribute:te,externalFileAttribute:le,extendedTimestamp:fe,lastModDate:ue,diskNumberStart:oe,uncompressedSize:Ie,compressedSize:ve}=T;let Y;if(fe){Y=new Uint8Array(9);const pe=Q(Y);F(pe,0,Dt),F(pe,2,b(Y)-4),Pe(pe,4,1),D(pe,5,Math.floor(ue.getTime()/1e3))}else Y=new Uint8Array;const ie=b(P,A,Y,I,C);D(m,i,Wt),F(m,i+4,z);const he=Q(U);y||D(he,18,Ie),L||D(he,14,ve),$(c,U,i+6),F(m,i+30,ie),F(m,i+32,b(x)),F(m,i+34,k&&ee?q:oe),F(m,i+36,te),le?D(m,i+38,le):V&&se&&Pe(m,i+38,ea),D(m,i+42,k&&H?W:v),$(c,N,i+46),$(c,P,i+46+b(N)),$(c,A,i+46+b(N,P)),$(c,Y,i+46+b(N,P,A)),$(c,I,i+46+b(N,P,A,Y)),$(c,C,i+46+b(N,P,A,Y,I)),$(c,x,i+46+b(N)+ie);const ke=46+b(N,x)+ie;if(i-E>s.availableSize&&(s.availableSize=0,await _e(o,c.slice(E,i)),E=i),i+=ke,r.onprogress)try{await r.onprogress(B+1,t.size,new yt(T))}catch{}}await _e(o,E?c.slice(E):c);let h=s.diskNumber;const{availableSize:g}=s;g<ft&&h++;let w=O(a,r,"zip64");if(p>=W||u>=W||f>=q||h>=q){if(w===!1)throw new Error(qe);w=!0}const d=new Uint8Array(w?oa:ft),_=Q(d);i=0,w&&(D(_,0,ta),J(_,4,BigInt(44)),F(_,12,45),F(_,14,45),D(_,16,h),D(_,20,l),J(_,24,BigInt(f)),J(_,32,BigInt(f)),J(_,40,BigInt(u)),J(_,48,BigInt(p)),D(_,56,aa),J(_,64,BigInt(p)+BigInt(u)),D(_,72,h+1),O(a,r,"supportZip64SplitFile",!0)&&(h=q,l=q),f=q,p=W,u=W,i+=Gt+Ht),D(_,i,ra),F(_,i+4,h),F(_,i+6,l),F(_,i+8,f),F(_,i+10,f),D(_,i+12,u),D(_,i+16,p);const M=b(e);if(M)if(M<=q)F(_,i+20,M);else throw new Error(va);await _e(o,d),M&&await _e(o,e)}async function _e(a,e){const r=a.getWriter();await r.ready,a.size+=b(e),await r.write(e),r.releaseLock()}function He(a){if(a)return(BigInt(a.getTime())+BigInt(116444736e5))*BigInt(1e4)}function O(a,e,r,t){const s=e[r]===Fe?a.options[r]:e[r];return s===Fe?t:s}function Ga(a){return a+5*(Math.floor(a/16383)+1)}function Pe(a,e,r){a.setUint8(e,r)}function F(a,e,r){a.setUint16(e,r,!0)}function D(a,e,r){a.setUint32(e,r,!0)}function J(a,e,r){a.setBigUint64(e,r,!0)}function $(a,e,r){a.set(e,r)}function Q(a){return new DataView(a.buffer)}function b(...a){let e=0;return a.forEach(r=>r&&(e+=r.length)),e}async function Ha(a){const e=new Ca(new St("application/zip")),r=a.map(n=>{const o=Object.values(n.files).map(l=>e.add(`${n.volumeName}/${l.name}`,new Ta(l)));return[e.add(`${n.volumeName}.mokuro`,new ya(JSON.stringify(n.mokuroData))),...o]});await Promise.all(r);const t=await e.close(),s=document.createElement("a");return s.href=URL.createObjectURL(t),s.download=`${a[0].mokuroData.title}.zip`,s.click(),!1}const Ya=!1,Er=Object.freeze(Object.defineProperty({__proto__:null,prerender:Ya},Symbol.toStringTag,{value:"Module"}));function pt(a){let e,r;return e=new Nt({props:{rounded:!0,border:!0,class:"divide-y divide-gray-200 dark:divide-gray-600",$$slots:{default:[Xa]},$$scope:{ctx:a}}}),{c(){Ae(e.$$.fragment)},l(t){De(e.$$.fragment,t)},m(t,s){Te(e,t,s),r=!0},p(t,s){const n={};s&8199&&(n.$$scope={dirty:s,ctx:t}),e.$set(n)},i(t){r||(Z(e.$$.fragment,t),r=!0)},o(t){K(e.$$.fragment,t),r=!1},d(t){ye(e,t)}}}function Et(a){let e,r;return e=new ba({}),{c(){Ae(e.$$.fragment)},l(t){De(e.$$.fragment,t)},m(t,s){Te(e,t,s),r=!0},i(t){r||(Z(e.$$.fragment,t),r=!0)},o(t){K(e.$$.fragment,t),r=!1},d(t){ye(e,t)}}}function ja(a){let e,r,t,s,n,o,l,i,u,p,f,c;p=new fa({props:{class:"text-red-400 hover:text-red-500 z-10 poin"}}),p.$on("click",a[5]);let m=a[0]&&Et();return{c(){e=j("div"),r=j("div"),t=j("p"),s=ae(a[4]),n=de(),o=j("p"),l=ae(a[1]),i=de(),u=j("div"),Ae(p.$$.fragment),f=de(),m&&m.c(),this.h()},l(E){e=X(E,"DIV",{class:!0});var h=G(e);r=X(h,"DIV",{});var g=G(r);t=X(g,"P",{class:!0});var w=G(t);s=re(w,a[4]),w.forEach(R),n=me(g),o=X(g,"P",{});var d=G(o);l=re(d,a[1]),d.forEach(R),g.forEach(R),i=me(h),u=X(h,"DIV",{class:!0});var _=G(u);De(p.$$.fragment,_),f=me(_),m&&m.l(_),_.forEach(R),h.forEach(R),this.h()},h(){ne(t,"class","font-semibold"),Ce(t,"text-white",!a[0]),ne(u,"class","flex gap-2"),ne(e,"class","flex flex-row gap-5 items-center justify-between w-full"),Ce(e,"text-green-400",a[0])},m(E,h){ce(E,e,h),S(e,r),S(r,t),S(t,s),S(r,n),S(r,o),S(o,l),S(e,i),S(e,u),Te(p,u,null),S(u,f),m&&m.m(u,null),c=!0},p(E,h){(!c||h&1)&&Ce(t,"text-white",!E[0]),(!c||h&2)&&be(l,E[1]),E[0]?m?h&1&&Z(m,1):(m=Et(),m.c(),Z(m,1),m.m(u,null)):m&&(ze(),K(m,1,1,()=>{m=null}),Be()),(!c||h&1)&&Ce(e,"text-green-400",E[0])},i(E){c||(Z(p.$$.fragment,E),Z(m),c=!0)},o(E){K(p.$$.fragment,E),K(m),c=!1},d(E){E&&R(e),ye(p),m&&m.d()}}}function Xa(a){let e,r;return e=new Lt({props:{normalClass:"py-4",$$slots:{default:[ja]},$$scope:{ctx:a}}}),e.$on("click",a[9]),{c(){Ae(e.$$.fragment)},l(t){De(e.$$.fragment,t)},m(t,s){Te(e,t,s),r=!0},p(t,s){const n={};s&8195&&(n.$$scope={dirty:s,ctx:t}),e.$set(n)},i(t){r||(Z(e.$$.fragment,t),r=!0)},o(t){K(e.$$.fragment,t),r=!1},d(t){ye(e,t)}}}function Ka(a){let e,r,t=a[2].params.manga&&pt(a);return{c(){t&&t.c(),e=Se()},l(s){t&&t.l(s),e=Se()},m(s,n){t&&t.m(s,n),ce(s,e,n),r=!0},p(s,[n]){s[2].params.manga?t?(t.p(s,n),n&4&&Z(t,1)):(t=pt(s),t.c(),Z(t,1),t.m(e.parentNode,e)):t&&(ze(),K(t,1,1,()=>{t=null}),Be())},i(s){r||(Z(t),r=!0)},o(s){K(t),r=!1},d(s){s&&R(e),t&&t.d(s)}}}function qa(a,e,r){let t,s,n,o,l;Le(a,At,g=>r(2,o=g)),Le(a,Mt,g=>r(8,l=g));let{volume:i}=e;const{volumeName:u,mokuroData:p}=i,{title_uuid:f,volume_uuid:c}=p,m=decodeURI(u);async function E(g){g.stopPropagation(),Tt(`Delete ${m}?`,async()=>{const w=await Me.catalog.get(f),d=w==null?void 0:w.manga.filter(({mokuroData:_})=>_.volume_uuid!==c);ht(c),d&&d.length>0?(await Me.catalog.update(f,{manga:d}),xe(`/${o.params.manga}`)):(Me.catalog.delete(f),xe("/"))})}const h=()=>xe(`/${o.params.manga}/${c}`);return a.$$set=g=>{"volume"in g&&r(6,i=g.volume)},a.$$.update=()=>{a.$$.dirty&256&&r(7,t=(l==null?void 0:l[c||0])||1),a.$$.dirty&192&&r(1,s=`${t===i.mokuroData.pages.length-1?t+1:t} / ${i.mokuroData.pages.length}`),a.$$.dirty&192&&r(0,n=t===i.mokuroData.pages.length||t===i.mokuroData.pages.length-1)},[n,s,o,c,m,E,i,t,l,h]}class Ja extends Xe{constructor(e){super(),Ke(this,e,qa,Ka,je,{volume:6})}}function gt(a,e,r){const t=a.slice();return t[8]=e[r],t}function Qa(a){let e,r="Manga not found";return{c(){e=j("div"),e.textContent=r,this.h()},l(t){e=X(t,"DIV",{class:!0,"data-svelte-h":!0}),Rt(e)!=="svelte-5xe0i3"&&(e.textContent=r),this.h()},h(){ne(e,"class","flex justify-center p-16")},m(t,s){ce(t,e,s)},p:Ne,i:Ne,o:Ne,d(t){t&&R(e)}}}function Wa(a){let e,r,t,s,n=a[0][0].mokuroData.title+"",o,l,i,u,p,f=a[2].completed+"",c,m,E=a[0].length+"",h,g,w,d,_=a[2].chars+"",M,B,T,v,N=a[2].timeReadInMinutes+"",P,A,I,C,x,z,U,V,k;return C=new rt({props:{color:"alternative",$$slots:{default:[er]},$$scope:{ctx:a}}}),C.$on("click",a[3]),z=new rt({props:{color:"light",disabled:a[1],$$slots:{default:[tr]},$$scope:{ctx:a}}}),z.$on("click",a[4]),V=new Ot({props:{active:!0,class:"flex-1 h-full w-full",$$slots:{default:[ar]},$$scope:{ctx:a}}}),{c(){e=j("div"),r=j("div"),t=j("div"),s=j("h3"),o=ae(n),l=de(),i=j("div"),u=j("p"),p=ae("Volumes: "),c=ae(f),m=ae(" / "),h=ae(E),g=de(),w=j("p"),d=ae("Characters read: "),M=ae(_),B=de(),T=j("p"),v=ae("Minutes read: "),P=ae(N),A=de(),I=j("div"),Ae(C.$$.fragment),x=de(),Ae(z.$$.fragment),U=de(),Ae(V.$$.fragment),this.h()},l(y){e=X(y,"DIV",{class:!0});var L=G(e);r=X(L,"DIV",{class:!0});var ee=G(r);t=X(ee,"DIV",{class:!0});var H=G(t);s=X(H,"H3",{class:!0});var se=G(s);o=re(se,n),se.forEach(R),l=me(H),i=X(H,"DIV",{class:!0});var te=G(i);u=X(te,"P",{});var le=G(u);p=re(le,"Volumes: "),c=re(le,f),m=re(le," / "),h=re(le,E),le.forEach(R),g=me(te),w=X(te,"P",{});var fe=G(w);d=re(fe,"Characters read: "),M=re(fe,_),fe.forEach(R),B=me(te),T=X(te,"P",{});var ue=G(T);v=re(ue,"Minutes read: "),P=re(ue,N),ue.forEach(R),te.forEach(R),H.forEach(R),A=me(ee),I=X(ee,"DIV",{class:!0});var oe=G(I);De(C.$$.fragment,oe),x=me(oe),De(z.$$.fragment,oe),oe.forEach(R),ee.forEach(R),U=me(L),De(V.$$.fragment,L),L.forEach(R),this.h()},h(){ne(s,"class","font-bold"),ne(i,"class","flex flex-col gap-0 sm:flex-row sm:gap-5"),ne(t,"class","flex flex-col gap-2"),ne(I,"class","sm:block flex-col flex gap-2"),ne(r,"class","flex flex-row justify-between"),ne(e,"class","p-2 flex flex-col gap-5")},m(y,L){ce(y,e,L),S(e,r),S(r,t),S(t,s),S(s,o),S(t,l),S(t,i),S(i,u),S(u,p),S(u,c),S(u,m),S(u,h),S(i,g),S(i,w),S(w,d),S(w,M),S(i,B),S(i,T),S(T,v),S(T,P),S(r,A),S(r,I),Te(C,I,null),S(I,x),Te(z,I,null),S(e,U),Te(V,e,null),k=!0},p(y,L){(!k||L&1)&&n!==(n=y[0][0].mokuroData.title+"")&&be(o,n),(!k||L&4)&&f!==(f=y[2].completed+"")&&be(c,f),(!k||L&1)&&E!==(E=y[0].length+"")&&be(h,E),(!k||L&4)&&_!==(_=y[2].chars+"")&&be(M,_),(!k||L&4)&&N!==(N=y[2].timeReadInMinutes+"")&&be(P,N);const ee={};L&2048&&(ee.$$scope={dirty:L,ctx:y}),C.$set(ee);const H={};L&2&&(H.disabled=y[1]),L&2050&&(H.$$scope={dirty:L,ctx:y}),z.$set(H);const se={};L&2049&&(se.$$scope={dirty:L,ctx:y}),V.$set(se)},i(y){k||(Z(C.$$.fragment,y),Z(z.$$.fragment,y),Z(V.$$.fragment,y),k=!0)},o(y){K(C.$$.fragment,y),K(z.$$.fragment,y),K(V.$$.fragment,y),k=!1},d(y){y&&R(e),ye(C),ye(z),ye(V)}}}function er(a){let e;return{c(){e=ae("Remove manga")},l(r){e=re(r,"Remove manga")},m(r,t){ce(r,e,t)},d(r){r&&R(e)}}}function tr(a){let e=a[1]?"Extracting...":"Extract manga",r;return{c(){r=ae(e)},l(t){r=re(t,e)},m(t,s){ce(t,r,s)},p(t,s){s&2&&e!==(e=t[1]?"Extracting...":"Extract manga")&&be(r,e)},d(t){t&&R(r)}}}function wt(a,e){let r,t,s;return t=new Ja({props:{volume:e[8]}}),{key:a,first:null,c(){r=Se(),Ae(t.$$.fragment),this.h()},l(n){r=Se(),De(t.$$.fragment,n),this.h()},h(){this.first=r},m(n,o){ce(n,r,o),Te(t,n,o),s=!0},p(n,o){e=n;const l={};o&1&&(l.volume=e[8]),t.$set(l)},i(n){s||(Z(t.$$.fragment,n),s=!0)},o(n){K(t.$$.fragment,n),s=!1},d(n){n&&R(r),ye(t,n)}}}function ar(a){let e=[],r=new Map,t,s,n=at(a[0]);const o=l=>l[8].mokuroData.volume_uuid;for(let l=0;l<n.length;l+=1){let i=gt(a,n,l),u=o(i);r.set(u,e[l]=wt(u,i))}return{c(){for(let l=0;l<e.length;l+=1)e[l].c();t=Se()},l(l){for(let i=0;i<e.length;i+=1)e[i].l(l);t=Se()},m(l,i){for(let u=0;u<e.length;u+=1)e[u]&&e[u].m(l,i);ce(l,t,i),s=!0},p(l,i){i&1&&(n=at(l[0]),ze(),e=Ct(e,i,o,1,l,n,r,t.parentNode,xt,wt,t,gt),Be())},i(l){if(!s){for(let i=0;i<n.length;i+=1)Z(e[i]);s=!0}},o(l){for(let i=0;i<e.length;i+=1)K(e[i]);s=!1},d(l){l&&R(t);for(let i=0;i<e.length;i+=1)e[i].d(l)}}}function rr(a){var p;let e,r,t,s,n,o;document.title=e=((p=a[0])==null?void 0:p[0].mokuroData.title)||"Manga";const l=[Wa,Qa],i=[];function u(f,c){return f[0]&&f[2]?0:1}return t=u(a),s=i[t]=l[t](a),{c(){r=de(),s.c(),n=Se()},l(f){kt("svelte-1dnyevr",document.head).forEach(R),r=me(f),s.l(f),n=Se()},m(f,c){ce(f,r,c),i[t].m(f,c),ce(f,n,c),o=!0},p(f,[c]){var E;(!o||c&1)&&e!==(e=((E=f[0])==null?void 0:E[0].mokuroData.title)||"Manga")&&(document.title=e);let m=t;t=u(f),t===m?i[t].p(f,c):(ze(),K(i[m],1,1,()=>{i[m]=null}),Be(),s=i[t],s?s.p(f,c):(s=i[t]=l[t](f),s.c()),Z(s,1),s.m(n.parentNode,n))},i(f){o||(Z(s),o=!0)},o(f){K(s),o=!1},d(f){f&&(R(r),R(n)),i[t].d(f)}}}function sr(a,e){return a.mokuroData.volume.localeCompare(e.mokuroData.volume,void 0,{numeric:!0,sensitivity:"base"})}function ir(a,e,r){let t,s,n,o,l;Le(a,At,f=>r(5,n=f)),Le(a,Ut,f=>r(6,o=f)),Le(a,Pt,f=>r(2,l=f));async function i(){const f=t==null?void 0:t[0].mokuroData.title_uuid;t==null||t.forEach(c=>{const m=c.mokuroData.volume_uuid;ht(m)}),await Me.catalog.delete(f),xe("/")}function u(){Tt("Are you sure you want to delete this manga?",i)}async function p(){t&&(r(1,s=!0),r(1,s=await Ha(t)))}return a.$$.update=()=>{var f;a.$$.dirty&96&&r(0,t=(f=o==null?void 0:o.find(c=>c.id===n.params.manga))==null?void 0:f.manga.sort(sr))},r(1,s=!1),[t,s,l,u,p,n,o]}class gr extends Xe{constructor(e){super(),Ke(this,e,ir,rr,je,{})}}export{gr as component,Er as universal};
